<div class="flex justify-center items-center">
  <mat-card class="auth-wraper w-96 pt pb-6 rounded-2xl">
    <h2 data-cy="titleSignin" class="text-2xl font-semibold mb-6 text-center">
      {{ this.translateService.t('html.components.loginAndRegister.titleRegister')() }}
    </h2>

    <form [formGroup]="form" data-cy="register-form" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">
      <mat-form-field appearance="outline">
        <mat-label class="text-color-principal">{{ this.translateService.t('html.components.loginAndRegister.emailLbl')() }}</mat-label>
        <input matInput type="email" formControlName="email" />
        @if(form.get('email')?.hasError('required')){<mat-error>{{
          this.translateService.t('errors.forms.requiredEmail')()
        }}</mat-error
        >} @if(form.get('email')?.hasError('email')){<mat-error>{{
          this.translateService.t('errors.forms.formatInvalid')()
        }}</mat-error
        >}
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label class="text-color-principal">{{ this.translateService.t('html.components.loginAndRegister.passLbl')() }}</mat-label>
        <input matInput type="password" formControlName="password" />
        @if(form.get('password')?.hasError('required')){<mat-error>{{
          this.translateService.t('errors.forms.requiredPass')()
        }}</mat-error
        >} @if(form.get('password')?.hasError('minlength')){<mat-error>{{
          this.translateService.t('errors.forms.passMinLenght')()
        }}</mat-error
        >}
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label class="text-color-principal">{{
          this.translateService.t('html.components.loginAndRegister.repeatPassLbl')()
        }}</mat-label>
        <input matInput type="password" formControlName="repeatPassword" />
        @if(form.get('repeatPassword')?.hasError('required')){
        <mat-error>{{ this.translateService.t('errors.forms.requiredPass')() }}</mat-error>
        } @if(form.hasError('passwordMismatch') ||
        form.get('repeatPassword')?.hasError('passwordMismatch')){
        <mat-error> {{ this.translateService.t('errors.forms.passwordMismatch')() }}</mat-error>
        }
      </mat-form-field>

      <mat-checkbox class="rememberCbx" formControlName="acceptTerms" class="text-sm" (change)="this.onPrivacyChange()">
        <span class="text-color-principal">
          {{ this.translateService.t('html.components.loginAndRegister.acceptPrivacyText')() }}
        </span>
        <a href="#" (click)="openPrivacyDialog()" class="text-blue-500 hover:underline">
          {{ this.translateService.t('html.components.auth-shell.privacyPolicy')() }}
        </a>
      </mat-checkbox>
      @if(form.get('acceptTerms')?.hasError('required') && this.errorPrivacyDisplay){
      <mat-error class="errorPrivacy">
        {{ this.translateService.t('errors.forms.requiredPrivacy')() }}
      </mat-error>
      }

      @if(errorMessage){
      <div class="text-red-500 text-sm">
        {{ errorMessage }}
      </div>
      } @if(successMessage){
      <div class="text-green-600 text-sm">
        {{ successMessage }}
      </div>
      }

      <button mat-flat-button color="primary" type="submit" [disabled]="loading">
        @if(!loading){
        <ng-container>
          {{ this.translateService.t('html.components.loginAndRegister.registerTextBtn')() }}
        </ng-container>
        }@else{
        <mat-progress-spinner diameter="20" mode="indeterminate"></mat-progress-spinner>
        }
      </button>
      <div class="google-auth">
        <button mat-stroked-button color="accent" (click)="onGoogleSignup()">
          <span class="google-login-label">
            <img src="assets\img\Google__G__logo.svg" alt="Google logo" class="google-icon" />
            Sign up with Google
          </span>
        </button>
      </div>
    </form>
  </mat-card>
</div>
